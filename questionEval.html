<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Question-Evaluation</title>
    <link rel="stylesheet" href="style.css">

  <style>
    html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    }
 
    body {
      display: flex;
      flex-direction: column;
      
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
    }

    main {
      flex: 1; /* pushes footer to bottom */
    }

    .header-inner {
      display: flex; 
      align-items: center;      
      justify-content: center;
      padding: 10px;
      min-height: 30px;  
      background-color: #98cdf5;
    }

    
    .brand {
      font-weight: 500; 
      font-size: 3.15rem; 
      color: #950000;
      text-align: center;
      
    }
    #class-title {
      position: absolute;
      top: 12%;
      left: 8%;
      transform: translate(-50%, -50%);

      font-size: 2.15rem;
      font-weight: bold;
      color: #000000;
      
    }

    .question{
      font-size: 1.8rem;
      color: #000000;
    }

    .answers{
      font-size: 1.5rem;
      color: #000000;
    }

    .percentage{
      font-size: 1.2rem;
      color: #000000;
    }

    .bar-row {
        display: flex;
        align-items: center;     
        gap: 12px;                
        margin-bottom: 6px;
    }


    .bar {
    width: 100%;
    border: 1px solid black;
    height: 50px;
    width: 1240px;
    margin-bottom: 5px;
    }
    
    .fill {
    height: 100%;
    width: 0;                 /* start at 0 */
    transition: width 10s ease; /* animate width changes */
    }
    
    
    #barA1 { background-color: #4CAF50; }
    #barA2 { background-color: #2196F3; } 
    #barA3 { background-color: #FF9800; } 
    
    #chartContainer p {
        margin: 0 0 10px 0;
    }


    .content {
      display: flex;
      flex-direction: column;
      padding: 70px;
      gap: 15px;
      
    }

    .button {
      position: absolute;
      top: 86%;
      left: 90%;
      transform: translate(-50%, -50%);
      
      background-color: #007b8b;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      
      width: 80px;
      height: 40px;
      font-size: 1.4rem;
      
    }


    .button:hover {
      background-color: #31c5ee; 
      transform: translate(-50%, -50%) scale(1.05); 
      box-shadow: 0 5px 15px rgba(0,0,0,0.2); 
    }

    footer {
      display: flex; 
      align-items: center; 
      justify-content: center; 
      padding: 12px;
      min-height: 35px;
      font-weight: 600; 
      color: #950000;
      background-color: #8abce1;
    }

    </style>
</head>

<body>
  <main>

  <div class="header-inner"> 
      <div class="brand">FeedUrProf</div> 
  </div>

<div class="content">

<h2 class="question" id="questionTitle">Frage wird hier angezeigt</h2>

<div id="chartContainer">

    <div class="bar-row">
    <div class="bar"><div class="fill" id="barA1"></div></div>
    <p class="percentage" id="percentA1">0%</p>
    </div>

    <p class="answers" id="labelA1">Antwort 1</p>
    
    <div class="bar-row">
    <div class="bar"><div class="fill" id="barA2"></div></div>
    <p class="percentage" id="percentA2">0%</p>
    </div>

    <p class="answers" id="labelA2">Antwort 2</p>

    <div class="bar-row">
    <div class="bar"><div class="fill" id="barA3"></div></div>
    <p class="percentage" id="percentA3">0%</p>
    </div>

    <p class="answers" id="labelA3">Antwort 3</p>
</div>

</div>

<button class="button"  onclick="window.location.href='StartClass.html'">Close</button>

</main>

<footer>
    FeedUrProf Â©
</footer>

  <h1 id="class-title"></h1>

  <script>
  const title = localStorage.getItem("selectedClassTitle");

  if (title) {
    document.getElementById("class-title").textContent = title;
  }
  

const votes = [30, 14, 67];
const total = votes.reduce((a, b) => a + b, 0);

const percA1 = total === 0 ? 0 : Math.round(votes[0] / total * 100);
const percA2 = total === 0 ? 0 : Math.round(votes[1] / total * 100);
const percA3 = total === 0 ? 0 : Math.round(votes[2] / total * 100);

// update the percent labels immediately
document.getElementById("percentA1").textContent = percA1 + "%";
document.getElementById("percentA2").textContent = percA2 + "%";
document.getElementById("percentA3").textContent = percA3 + "%";

// animate the bar fills after a short delay
setTimeout(() => {
  document.getElementById("barA1").style.width = percA1 + "%";
  document.getElementById("barA2").style.width = percA2 + "%";
  document.getElementById("barA3").style.width = percA3 + "%";
}, 100); // 100ms delay ensures the transition triggers


  

function loadQuestionResults() {
  const className = localStorage.getItem("selectedClassTitle");
  const questionIndex = localStorage.getItem("selectedQuestionIndex");

  if (!className || questionIndex === null) return;

  const allData = JSON.parse(localStorage.getItem("classQuestions")) || {};
  const questions = allData[className] || [];

  const q = questions[questionIndex];
  if (!q) return;

  document.getElementById("questionTitle").textContent = q.q;

  document.getElementById("labelA1").textContent = q.a1 || "";
  document.getElementById("labelA2").textContent = q.a2 || "";
  document.getElementById("labelA3").textContent = q.a3 || "";
}

loadQuestionResults(); // run on load

</script>

</body>
</html>